function cloneObject(e){if(null==e||"object"!=(void 0===e?"undefined":_typeof(e)))return e;if(e instanceof Date){var t=new Date(e.getDate());return t}if(e instanceof Array){t=[];for(var o=0,n=e.length;o<n;o++)t[o]=e[o];return t}if(e instanceof Object){for(o in t={},e)e.hasOwnProperty(o)&&(t[o]=cloneObject(e[o]));return t}}function jumpTo(e){return mashiro_global.lib.pjax_to_url(e,"#app")}function injectStyles(e){$("<div />",{html:"&shy;<style>"+e+"</style>"}).appendTo("body")}function scrollBar(){document.body.clientWidth>860&&$(window).scroll(function(){var e=$(window).scrollTop(),t=$(document).height(),o=$(window).height(),n=parseInt(e/(t-o)*100);$("#bar").css("width",n+"%"),$("#bar").css("background","orange"),$(".toc-container").css("height",$(".site-content").outerHeight()),$(".skin-menu").removeClass("show")})}function pjaxdone(){var e=Math.floor(Math.random()*bg.length);$(".centerbg").css("background-image",'url("'+bg[e]+'")')}function submenu(){$(".submenu").click(function(){$(this).toggleClass("submenu-open-icon"),$(this).children(".sub-menu").toggle(300)})}function copy_code_block(){$("pre").addClass("line-numbers"),$("pre code").each(function(e,t){$(t).attr({id:"language-"+e}),$(this).after('<a class="copy-code" href="javascript:" data-clipboard-target="#language-'+e+'" title="拷贝代码"><i class="fa fa-clipboard" aria-hidden="true"></i></a>')});new ClipboardJS(".copy-code")}function reload_show_date_time(){BirthDay=new Date("06/02/2017 18:00:00"),today=new Date,timeold=today.getTime()-BirthDay.getTime(),sectimeold=timeold/1e3,secondsold=Math.floor(sectimeold),msPerDay=864e5,e_daysold=timeold/msPerDay,daysold=Math.floor(e_daysold),monitorday.innerHTML=daysold}function timeSeriesReload(e){1==e?($("#archives-temp h3.ar-mon").click(function(){return $(this).next().slideToggle(400),!1}),lazyload()):($("#archives-temp h3.ar-mon").css({cursor:"s-resize"}),$("#archives-temp h3.ar-mon").each(function(){var e=$(this).next().children(".brick").length;$(this).children("#post-num").text(e)}))}function get_poem(e,t){var o=document.querySelector(e),n=document.querySelector(t),s=new XMLHttpRequest;s.open("get","https://v2.jinrishici.com/one.json"),s.withCredentials=!0,s.onreadystatechange=function(){if(4===s.readyState){var e=JSON.parse(s.responseText);o.innerHTML=e.data.content,n.innerHTML="【"+e.data.origin.dynasty+"】"+e.data.origin.author+"《"+e.data.origin.title+"》"}},s.send()}function hearthstone_deck_iframe(){$("iframe").hasClass("hearthstone-deck")&&($(".hearthstone-deck").each(function(){$(this).attr("height",5*$(this).width()/9+"px")}),$(".hearthstone-deck-container").each(function(){var e=5*$(this).width()/9+14;$(this).css("height",e+"px")}))}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};if(mashiro_global.ini=new function(){this.normalize=function(){lazyload(),social_share(),mashiro_global.post_list_show_animation.ini(),copy_code_block(),$("div").hasClass("poem-wrap")&&get_poem(".poem",".info"),$(function(){-1!=navigator.userAgent.indexOf("AppleWebKit")&&$("body").addClass("isWebKit"),hearthstone_deck_iframe()})},this.pjax=function(){pjaxInit(),social_share(),mashiro_global.post_list_show_animation.ini(),copy_code_block(),$("div").hasClass("poem-wrap")&&get_poem(".poem",".info"),hearthstone_deck_iframe()}},mashiro_global.lib=new function(){this.removeClass=function(e,t){var o=document.getElementById(e);o.classList?o.classList.remove(t):o.className=o.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},this.addClass=function(e,t){var o=document.getElementById(e);o.classList?o.classList.add(t):o.className+=" "+t},this.hasClass=function(e,t){var o=document.getElementById(e);if(o.classList)var n=o.classList.contains(t);else n=new RegExp("(^| )"+t+"( |$)","gi").test(o.className);return n},this.toggleClass=function(e,t){var o=document.getElementById(e);if(o.classList)o.classList.toggle(t);else{var n=o.className.split(" "),s=n.indexOf(t);s>=0?n.splice(s,1):n.push(t),o.className=n.join(" ")}},this.saveFile=function(e,t){var o=new XMLHttpRequest;o.responseType="blob",o.onload=function(){var e=document.createElement("a");e.href=window.URL.createObjectURL(o.response),e.download=t,e.style.display="none",document.body.appendChild(e),e.click()},o.open("GET",e),o.send()}},mashiro_global.post_list_show_animation=new function(){this.ini=function(e){$("article.post-list-thumb").each(function(t){if(e)var o=$(window).height();else if($(".headertop").hasClass("headertop-bar"))o=0;else o=$(window).height()-300;mashiro_global.landing_at_home||(o+=300);var n=$("article.post-list-thumb").eq(t).offset().top;$(window).height()+$(window).scrollTop()>=n&&$("article.post-list-thumb").eq(t).addClass("post-list-show"),$(window).scroll(function(){var e=$(window).scrollTop();e+o>=n&&e&&$("article.post-list-thumb").eq(t).addClass("post-list-show")})})}},scrollBar(),$(document).ready(function(){pjaxdone(),submenu()}),document.body.clientWidth<=860&&!window.is_app){function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?document.getElementById("moblieGoTop").style.display="block":document.getElementById("moblieGoTop").style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}window.onscroll=function(){scrollFunction()}}timeSeriesReload();var pjaxInit=function(){lazyload(),$(".iconflat").css("width","50px").css("height","50px"),$(".openNav").css("height","50px"),timeSeriesReload()};mashiro_global.ini.normalize();var home=location.href,s=$("#bgvideo")[0],Siren={TOC:function(){if($(".toc").length>0&&document.body.clientWidth>1200){$(".pattern-center").length>0?tocbot.init({tocSelector:".toc",contentSelector:".entry-content",scrollSmooth:!0,headingSelector:"h1, h2, h3, h4, h5",headingsOffset:-400,scrollSmoothOffset:-85}):tocbot.init({tocSelector:".toc",contentSelector:".entry-content",scrollSmooth:!0,headingSelector:"h1, h2, h3, h4, h5",headingsOffset:-85,scrollSmoothOffset:-85});var e=$(".toc").offset().top-135;window.onscroll=function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;t>=e?$(".toc").addClass("toc-fixed"):$(".toc").removeClass("toc-fixed")}}},VA:function(){if(!mashiro_option.valine){var e=new Valine;e.init({el:"#vcomments",appId:mashiro_option.v_appId,appKey:mashiro_option.v_appKey,path:window.location.pathname,placeholder:"你是我一生只会遇见一次的惊喜 ..."})}},MJ:function(){"1"==mashiro_option.mathjax&&$.getScript("//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML",function(){MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}});var e=document.getElementsByClassName("entry-content")[0];MathJax.Hub.Queue(["Typeset",MathJax.Hub,e])})},MN:function(){$(".iconflat").on("click",function(){$("#main-container").hasClass("open")?($(".iconflat").css("width","50px").css("height","50px"),$(".openNav").css("height","50px")):($(".iconflat").css("width","100%").css("height","100%"),$(".openNav").css("height","100%")),$("body").toggleClass("navOpen"),$("#main-container,#mo-nav,.openNav").toggleClass("open")})},MNH:function(){$("body").hasClass("navOpen")&&($("body").toggleClass("navOpen"),$("#main-container,#mo-nav,.openNav").toggleClass("open"))},splay:function(){$("#video-btn").addClass("video-pause").removeClass("video-play").show(),$(".video-stu").css({bottom:"-100px"}),$(".focusinfo").css({top:"-999px"}),$("#meteor").css({display:"none"}),$("#banner_waves").addClass("banner_wave_hide"),s.play()},spause:function(){$("#video-btn").addClass("video-play").removeClass("video-pause"),$(".focusinfo").css({top:"49.3%"}),$("#meteor").css({display:"none"}),$("#banner_waves").addClass("banner_wave_hide"),s.pause()},liveplay:function(){null!=s.oncanplay&&$(".haslive").length>0&&$(".videolive").length>0&&Siren.splay()},livepause:function(){null!=s.oncanplay&&$(".haslive").length>0&&(Siren.spause(),$(".video-stu").css({bottom:"0px"}).html("已暂停 ..."))},addsource:function(){$(".video-stu").html("正在载入视频 ...").css({bottom:"0px"});var e=Poi.movies.name.split(","),t=e[Math.floor(Math.random()*e.length)];$("#bgvideo").attr("src",Poi.movies.url+"/"+t),$("#bgvideo").attr("video-name",t)},LV:function(){var e=$("#video-btn");e.on("click",function(){$(this).hasClass("loadvideo")?($(this).addClass("video-pause").removeClass("loadvideo").hide(),Siren.addsource(),s.oncanplay=function(){Siren.splay(),$("#video-add").show(),e.addClass("videolive"),e.addClass("haslive")}):$(this).hasClass("video-pause")?(Siren.spause(),e.removeClass("videolive"),$(".video-stu").css({bottom:"0px"}).html("已暂停 ...")):(Siren.splay(),e.addClass("videolive")),s.onended=function(){$("#bgvideo").attr("src",""),$("#video-add").hide(),e.addClass("loadvideo").removeClass("video-pause"),e.removeClass("videolive"),e.removeClass("haslive"),$(".focusinfo").css({top:"49.3%"})}}),$("#video-add").on("click",function(){Siren.addsource()})},CE:function(){$(".comments-hidden").show(),$(".comments-main").hide(),$(".comments-hidden").click(function(){$(".comments-main").slideDown(500),$(".comments-hidden").hide()}),$(".archives").hide(),$(".archives:first").show(),$("#archives-temp h3").click(function(){return $(this).next().slideToggle("fast"),!1}),$(".js-toggle-search").on("click",function(){$(".js-toggle-search").toggleClass("is-active"),$(".js-search").toggleClass("is-visible")}),$(".search_close").on("click",function(){$(".js-search").hasClass("is-visible")&&($(".js-toggle-search").toggleClass("is-active"),$(".js-search").toggleClass("is-visible"))}),$("#show-nav").on("click",function(){$("#show-nav").hasClass("showNav")?($("#show-nav").removeClass("showNav").addClass("hideNav"),$(".site-top .lower nav").addClass("navbar")):($("#show-nav").removeClass("hideNav").addClass("showNav"),$(".site-top .lower nav").removeClass("navbar"))}),$("#loading").click(function(){$("#loading").fadeOut(500)})},NH:function(){var e=0,t=50,o=$(document).scrollTop();$(window).scroll(function(){var n=$(document).scrollTop();n==e&&$(".site-header").removeClass("yya"),n>e&&$(".site-header").addClass("yya"),n>t&&($(".site-header").addClass("gizle"),n>o?$(".site-header").removeClass("sabit"):$(".site-header").addClass("sabit"),o=n)})},XLS:function(){$body=window.opera?"CSS1Compat"==document.compatMode?$("html"):$("body"):$("html,body"),$("body").on("click","#pagination a",function(){return $(this).addClass("loading").text(""),$.ajax({type:"GET",url:$(this).attr("href")+"#main",success:function(e){result=$(e).find("#main .post"),nextHref=$(e).find("#pagination a").attr("href"),$("#main").append(result.fadeIn(500)),$("#pagination a").removeClass("loading").text("Previous"),lazyload(),mashiro_global.post_list_show_animation.ini(50),null!=nextHref?$("#pagination a").attr("href",nextHref):$("#pagination").html("<span>很高兴你翻到这里，但是真的没有了...</span>")}}),!1})},LA:function(){if(mashiro_option.leancloud){function e(e){var t=new AV.Query(e),o=[],n=$(".leancloud_visitors");n.each(function(){o.push($(this).attr("id").trim())}),t.containedIn("url",o),t.find().done(function(e){var t=".leancloud-visitors-count";if(0!==e.length){for(var s=0;s<e.length;s++){var i=e[s],a=i.get("url"),l=i.get("time"),c=document.getElementById(a);$(c).find(t).text(l)}for(s=0;s<o.length;s++){a=o[s],c=document.getElementById(a);var r=$(c).find(t);""==r.text()&&r.text(0)}}else n.find(t).text(0)}).fail(function(e,t){console.log("Error: "+t.code+" "+t.message)})}function t(e){var t=$(".leancloud_visitors"),o=t.attr("id").trim(),n=t.attr("data-flag-title").trim(),s=new AV.Query(e);s.equalTo("url",o),s.find({success:function(t){if(t.length>0){var s=t[0];s.fetchWhenSave(!0),s.increment("time"),s.save(null,{success:function(e){var t=$(document.getElementById(o));t.find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to save Visitor num, with error message: "+t.message)}})}else{var i=new e,a=new AV.ACL;a.setPublicReadAccess(!0),a.setPublicWriteAccess(!0),i.setACL(a),i.set("title",n),i.set("url",o),i.set("time",1),i.save(null,{success:function(e){var t=$(document.getElementById(o));t.find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to create")}})}},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}$(function(){var o=AV.Object.extend("Counter");1==$(".leancloud_visitors").length?t(o):$(".post-title").length>1&&e(o)})}},PSM:function(){$.getScript("/js/prism.js")},GT:function(){var e=100,t=1200,o=700,n=$(".cd-top");$(window).scroll(function(){$(this).scrollTop()>e?(n.addClass("cd-is-visible"),$(".changeSkin-gear").css("bottom","0"),$(window).height()>950?$(".cd-top.cd-is-visible").css("top","0"):$(".cd-top.cd-is-visible").css("top",$(window).height()-950+"px")):($(".changeSkin-gear").css("bottom","-999px"),$(".cd-top.cd-is-visible").css("top","-900px"),n.removeClass("cd-is-visible cd-fade-out")),$(this).scrollTop()>t&&n.addClass("cd-fade-out")}),n.on("click",function(e){e.preventDefault(),$("body,html").animate({scrollTop:0},o)})}};$(function(){Siren.NH(),Siren.GT(),Siren.XLS(),Siren.CE(),Siren.MN(),Siren.LV(),Siren.TOC(),Siren.PSM(),Siren.LA(),pjaxdone(),window.is_app&&injectStyles("#nprogress .bar { display: none; }"),"1"==Poi.pjax&&($(document).pjax("a[target!=_top]","#app",{fragment:"#app",timeout:8e3}).on("pjax:send",function(){$("#loading").fadeIn(300),$("#bar").css("width","0%"),mashiro_option.NProgressON&&NProgress.start(),Siren.MNH()}).on("pjax:complete",function(){Siren.CE(),Siren.VA(),Siren.MJ(),Siren.PSM(),Siren.TOC(),Siren.LA(),mashiro_option.NProgressON&&NProgress.done(),mashiro_global.ini.pjax(),pjaxdone(),$("#loading").fadeOut(500)}).on("submit",".search-form,.s-search",function(e){e.preventDefault(),$.pjax.submit(e,"#app",{fragment:"#app",timeout:8e3}),$(".js-search.is-visible").length>0&&($(".js-toggle-search").toggleClass("is-active"),$(".js-search").toggleClass("is-visible"))}),mashiro_global.lib.pjax_to_url=function(e,t){$.pjax({url:e,container:t,fragment:t,timeout:8e3})},window.addEventListener("popstate",function(e){Siren.CE(),timeSeriesReload(!0)},!1))});var isWebkit=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,isOpera=navigator.userAgent.toLowerCase().indexOf("opera")>-1,isIe=navigator.userAgent.toLowerCase().indexOf("msie")>-1;(isWebkit||isOpera||isIe)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var e,t=location.hash.substring(1);/^[A-z0-9_-]+$/.test(t)&&(e=document.getElementById(t),e&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus()))},!1);